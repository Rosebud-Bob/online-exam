# 接口文档

所有失败请求返回格式：
```json
{
    "code": "someErrorCode",
    "message": "detailed information"
}
```

所有需要权限的操作均需要在header中携带token。

## 用户相关操作

### 登录请求

[UserController.java:30](https://github.com/Hell-Tractor/online-exam/blob/master/Backend/src/main/java/edu/nine14/exam/controller/UserController.java#L30)

用户请求登录，返回生成的token。刷新token同样使用本接口。

无权限要求。

#### API路径

```
/login
```

#### 请求参数

```json
{
    "username": "some username",
    "password": "MD5 encrypted password"
}
```

#### 返回信息

```json
{
    "code": "200",
    "data": "token"
}
```

### 更新密码

[UserController.java:49](https://github.com/Hell-Tractor/online-exam/blob/master/Backend/src/main/java/edu/nine14/exam/controller/UserController.java#L49)

尝试更新密码，返回是否更新成功。

需要权限：普通用户。

#### API路径

```
/updatePassword
```

#### 请求参数

```json
{
    "oldPassword": "MD5 encrypted password",
    "newPassword": "MD5 encrypted password"
}
```

#### 返回信息

```json
{
    "code": "200",
    "data": "update password success"
}
```

### 获取用户信息

[UserController.java:67](https://github.com/Hell-Tractor/online-exam/blob/master/Backend/src/main/java/edu/nine14/exam/controller/UserController.java#L67)

获取当前用户信息。（不包括用户名及密码）

需要权限：普通用户。

#### API路径

```
/getUserInfo
```

#### 请求参数

无

#### 返回信息

```json
{
    "code": "200",
    "data": {
        "userType": "U",
        "name": "somename",
        "mobileNumber": "123456",
        "sex": "男",
        "birthday": "2000-01-01",
        "grade": "1"
    }
}
```

### 更新用户信息

[UserController.java:84](https://github.com/Hell-Tractor/online-exam/blob/master/Backend/src/main/java/edu/nine14/exam/controller/UserController.java#L84)

更新当前用户信息。

需要权限：普通用户。

#### API路径

```
/updateUserInfo
```

#### 请求参数

可以只携带部分值，后端只对携带的参数进行更新。未携带的参数不进行更新。以下为支持的参数列表。

```json
{
    "userType": "U",
    "name": "somename",
    "mobileNumber": "123456",
    "sex": "男",
    "birthday": "2000-01-01",
    "grade": "1"
}
```

#### 返回信息

```json
{
    "code": "200",
    "data": "update success"
}
```

### 用户注册

[UserController.java:100](https://github.com/Hell-Tractor/online-exam/blob/master/Backend/src/main/java/edu/nine14/exam/controller/UserController.java#L100)

只允许注册普通用户，管理员账号不能通过前端创建。注册完成后需要使用login接口进行登录或使用updateUserInfo接口更新用户信息。

无权限要求。

#### API路径

```
/register
```

#### 请求参数

```json
{
    "username": "some username",
    "password": "MD5 encrypted password"
}
```

#### 返回信息

```json
{
    "code": "200",
    "data": "reigster success"
}
```

### 获取用户列表

[UserController.java:117](https://github.com/Hell-Tractor/online-exam/blob/master/Backend/src/main/java/edu/nine14/exam/controller/UserController.java#L117)

返回当前所有用户的用户名。

需要权限：管理员。

#### API路径

```
/getUserList
```

#### 请求参数

无

#### 返回信息

```json
{
    "code": "200",
    "data": [
        "username1",
        "username2",
        "username3",
        ...
    ]
}
```

### 获取指定用户信息

[UserController.java:133](https://github.com/Hell-Tractor/online-exam/blob/master/Backend/src/main/java/edu/nine14/exam/controller/UserController.java#L133)

根据给定的用户名获取用户的除用户名和密码外的全部信息。

需要权限：管理员。

#### API路径

```
/getUserInfoAdmin
```

#### 请求参数

```json
{
    "username": "some username"
}
```

#### 返回信息

```json
{
    "code": "200",
    "data": {
        "userType": "U",
        "name": "somename",
        "mobileNumber": "123456",
        "sex": "男",
        "birthday": "2000-01-01",
        "grade": "1"
    }
}
```

### 删除用户

[UserController.java:150](https://github.com/Hell-Tractor/online-exam/blob/master/Backend/src/main/java/edu/nine14/exam/controller/UserController.java#L150)

删除指定的用户。

需要权限：管理员。

#### API路径

```
/removeUser
```

#### 请求参数

```json
{
    "username": "some username"
}
```

#### 返回信息

```json
{
    "code": "200",
    "data": "remove success"
}
```
